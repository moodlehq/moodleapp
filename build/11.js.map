{"version":3,"sources":["../../src/core/user/pages/about/about.module.ts","../../src/core/user/pages/about/about.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreUserAboutPage } from './about';\nimport { CoreDirectivesModule } from '@directives/directives.module';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreUserComponentsModule } from '../../components/components.module';\n\n@NgModule({\n    declarations: [\n        CoreUserAboutPage,\n    ],\n    imports: [\n        CoreComponentsModule,\n        CoreDirectivesModule,\n        CoreUserComponentsModule,\n        IonicPageModule.forChild(CoreUserAboutPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class CoreUserAboutPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/user/pages/about/about.module.ts","// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { IonicPage, NavParams, Platform } from 'ionic-angular';\nimport { CoreUserProvider } from '../../providers/user';\nimport { CoreUserHelperProvider } from '../../providers/helper';\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\nimport { CoreEventsProvider } from '@providers/events';\nimport { CoreSitesProvider } from '@providers/sites';\n\n/**\n * Page that displays an user about page.\n */\n@IonicPage({ segment: 'core-user-about' })\n@Component({\n    selector: 'page-core-user-about',\n    templateUrl: 'about.html',\n})\nexport class CoreUserAboutPage {\n    protected courseId: number;\n    protected userId: number;\n    protected siteId;\n\n    userLoaded = false;\n    hasContact = false;\n    hasDetails = false;\n    isAndroid = false;\n    user: any = {};\n    title: string;\n\n    constructor(navParams: NavParams, private userProvider: CoreUserProvider, private userHelper: CoreUserHelperProvider,\n            private domUtils: CoreDomUtilsProvider, private eventsProvider: CoreEventsProvider, private sanitizer: DomSanitizer,\n            private sitesProvider: CoreSitesProvider, private platform: Platform) {\n\n        this.userId = navParams.get('userId');\n        this.courseId = navParams.get('courseId');\n        this.isAndroid = this.platform.is('android');\n\n        this.siteId = this.sitesProvider.getCurrentSite().getId();\n    }\n\n    /**\n     * View loaded.\n     */\n    ionViewDidLoad(): void {\n        this.fetchUser().finally(() => {\n            this.userLoaded = true;\n        });\n    }\n\n    /**\n     * Fetches the user and updates the view.\n     */\n    fetchUser(): Promise<any> {\n        return this.userProvider.getProfile(this.userId, this.courseId).then((user) => {\n\n            if (user.address) {\n                user.address = this.userHelper.formatAddress(user.address, user.city, user.country);\n                user.encodedAddress = this.sanitizer.bypassSecurityTrustUrl(\n                        (this.isAndroid ? 'geo:0,0?q=' : 'http://maps.google.com?q=') + encodeURIComponent(user.address));\n            }\n\n            this.hasContact = user.email || user.phone1 || user.phone2 || user.city || user.country || user.address;\n            this.hasDetails = user.url || user.interests || (user.customfields && user.customfields.length > 0);\n\n            this.user = user;\n            this.title = user.fullname;\n        }).catch((error) => {\n            this.domUtils.showErrorModalDefault(error, 'core.user.errorloaduser', true);\n        });\n    }\n\n    /**\n     * Refresh the user.\n     *\n     * @param {any} refresher Refresher.\n     */\n    refreshUser(refresher?: any): void {\n        this.userProvider.invalidateUserCache(this.userId).finally(() => {\n            this.fetchUser().finally(() => {\n                this.eventsProvider.trigger(CoreUserProvider.PROFILE_REFRESHED, {\n                    courseId: this.courseId, userId: this.userId,\n                    user: this.user\n                }, this.siteId);\n                refresher && refresher.complete();\n            });\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/user/pages/about/about.ts"],"sourceRoot":""}