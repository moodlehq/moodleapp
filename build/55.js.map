{"version":3,"sources":["../../src/addon/mod/workshop/pages/edit-submission/edit-submission.module.ts","../../src/addon/mod/workshop/pages/edit-submission/edit-submission.ts"],"names":[],"mappings":"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","file":"55.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreDirectivesModule } from '@directives/directives.module';\nimport { AddonModWorkshopEditSubmissionPage } from './edit-submission';\n\n@NgModule({\n    declarations: [\n        AddonModWorkshopEditSubmissionPage,\n    ],\n    imports: [\n        CoreDirectivesModule,\n        CoreComponentsModule,\n        IonicPageModule.forChild(AddonModWorkshopEditSubmissionPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class AddonModWorkshopEditSubmissionPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/workshop/pages/edit-submission/edit-submission.module.ts","// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { IonicPage, NavParams, NavController } from 'ionic-angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CoreEventsProvider } from '@providers/events';\nimport { CoreSitesProvider } from '@providers/sites';\nimport { CoreSyncProvider } from '@providers/sync';\nimport { CoreFileSessionProvider } from '@providers/file-session';\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\nimport { CoreTextUtilsProvider } from '@providers/utils/text';\nimport { CoreFileUploaderProvider } from '@core/fileuploader/providers/fileuploader';\nimport { AddonModWorkshopProvider } from '../../providers/workshop';\nimport { AddonModWorkshopHelperProvider } from '../../providers/helper';\nimport { AddonModWorkshopOfflineProvider } from '../../providers/offline';\n\n/**\n * Page that displays the workshop edit submission.\n */\n@IonicPage({ segment: 'addon-mod-workshop-edit-submission' })\n@Component({\n    selector: 'page-addon-mod-workshop-edit-submission',\n    templateUrl: 'edit-submission.html',\n})\nexport class AddonModWorkshopEditSubmissionPage implements OnInit, OnDestroy {\n\n    module: any;\n    courseId: number;\n    access: any;\n    submission = {\n        id: 0,\n        title: '',\n        content: '',\n        attachmentfiles: [],\n    };\n\n    loaded = false;\n    component = AddonModWorkshopProvider.COMPONENT;\n    componentId: number;\n    editForm: FormGroup; // The form group.\n\n    protected workshopId: number;\n    protected submissionId: number;\n    protected userId: number;\n    protected originalData: any = {};\n    protected hasOffline = false;\n    protected editing = false;\n    protected forceLeave = false;\n    protected siteId: string;\n    protected workshop: any;\n    protected isDestroyed = false;\n\n    constructor(navParams: NavParams, sitesProvider: CoreSitesProvider, protected fileUploaderProvider: CoreFileUploaderProvider,\n            protected workshopProvider: AddonModWorkshopProvider, protected workshopOffline: AddonModWorkshopOfflineProvider,\n            protected workshopHelper: AddonModWorkshopHelperProvider, protected navCtrl: NavController,\n            protected fileSessionprovider: CoreFileSessionProvider, protected syncProvider: CoreSyncProvider,\n            protected textUtils: CoreTextUtilsProvider, protected domUtils: CoreDomUtilsProvider, protected fb: FormBuilder,\n            protected translate: TranslateService, protected eventsProvider: CoreEventsProvider) {\n        this.module = navParams.get('module');\n        this.courseId = navParams.get('courseId');\n        this.access = navParams.get('access');\n        this.submissionId = navParams.get('submissionId');\n\n        this.workshopId = this.module.instance;\n        this.componentId = this.module.id;\n        this.userId = sitesProvider.getCurrentSiteUserId();\n        this.siteId = sitesProvider.getCurrentSiteId();\n\n        this.editForm = new FormGroup({});\n        this.editForm.addControl('title', this.fb.control('', Validators.required));\n        this.editForm.addControl('content', this.fb.control(''));\n    }\n\n    /**\n     * Component being initialized.\n     */\n    ngOnInit(): void {\n        if (!this.isDestroyed) {\n            // Block the workshop.\n            this.syncProvider.blockOperation(this.component, this.workshopId);\n        }\n\n        this.fetchSubmissionData();\n    }\n\n    /**\n     * Check if we can leave the page or not.\n     *\n     * @return {boolean|Promise<void>} Resolved if we can leave it, rejected if not.\n     */\n    ionViewCanLeave(): boolean | Promise<void> {\n        if (this.forceLeave) {\n            return true;\n        }\n\n        let promise;\n\n        // Check if data has changed.\n        if (!this.hasDataChanged()) {\n            promise = Promise.resolve();\n        } else {\n            // Show confirmation if some data has been modified.\n            promise = this.domUtils.showConfirm(this.translate.instant('core.confirmcanceledit'));\n        }\n\n        return promise.then(() => {\n            if (this.submission.attachmentfiles) {\n                // Delete the local files from the tmp folder.\n                this.fileUploaderProvider.clearTmpFiles(this.submission.attachmentfiles);\n            }\n        });\n    }\n\n    /**\n     * Fetch the submission data.\n     *\n     * @return {Promise<void>} Resolved when done.\n     */\n    protected fetchSubmissionData(): Promise<void> {\n        return this.workshopProvider.getWorkshop(this.courseId, this.module.id).then((workshopData) => {\n            this.workshop = workshopData;\n\n            if (this.submissionId > 0) {\n                this.editing = true;\n\n                return this.workshopHelper.getSubmissionById(this.workshopId, this.submissionId).then((submissionData) => {\n                    this.submission = submissionData;\n\n                    const canEdit = (this.userId == submissionData.authorid && this.access.cansubmit &&\n                        this.access.modifyingsubmissionallowed);\n                    if (!canEdit) {\n                        // Should not happen, but go back if does.\n                        this.forceLeavePage();\n\n                        return;\n                    }\n                });\n            } else if (!this.access.cansubmit || !this.access.creatingsubmissionallowed) {\n                // Should not happen, but go back if does.\n                this.forceLeavePage();\n\n                return;\n            }\n\n        }).then(() => {\n            return this.workshopOffline.getSubmissions(this.workshopId).then((submissionsActions) => {\n                if (submissionsActions && submissionsActions.length) {\n                    this.hasOffline = true;\n                    const actions = this.workshopHelper.filterSubmissionActions(submissionsActions, this.editing ?\n                        this.submission.id : 0);\n\n                    return this.workshopHelper.applyOfflineData(this.submission, actions);\n                } else {\n                    this.hasOffline = false;\n                }\n            }).finally(() => {\n                this.originalData.title = this.submission.title;\n                this.originalData.content = this.submission.content;\n                this.originalData.attachmentfiles = [];\n\n                this.submission.attachmentfiles.forEach((file) => {\n                    let filename;\n                    if (file.filename) {\n                        filename = file.filename;\n                    } else {\n                        // We don't have filename, extract it from the path.\n                        filename = file.filepath[0] == '/' ? file.filepath.substr(1) : file.filepath;\n                    }\n\n                    this.originalData.attachmentfiles.push({\n                        filename : filename,\n                        fileurl: file.fileurl\n                    });\n                });\n            });\n        }).then(() => {\n            this.editForm.controls['title'].setValue(this.submission.title);\n            this.editForm.controls['content'].setValue(this.submission.content);\n\n            const submissionId = this.submission.id || 'newsub';\n            this.fileSessionprovider.setFiles(this.component,\n                this.workshopId + '_' + submissionId, this.submission.attachmentfiles || []);\n\n            this.loaded = true;\n        }).catch((message) => {\n            this.loaded = false;\n\n            this.domUtils.showErrorModalDefault(message, 'core.course.errorgetmodule', true);\n\n            this.forceLeavePage();\n        });\n    }\n\n    /**\n     * Force leaving the page, without checking for changes.\n     */\n    protected forceLeavePage(): void {\n        this.forceLeave = true;\n        this.navCtrl.pop();\n    }\n\n    /**\n     * Get the form input data.\n     *\n     * @return {any} Object with all the info.\n     */\n    protected getInputData(): any {\n        const submissionId = this.submission.id || 'newsub';\n\n        const values = this.editForm.value;\n        values['attachmentfiles'] = this.fileSessionprovider.getFiles(this.component, this.workshopId + '_' + submissionId) || [];\n\n        return values;\n    }\n\n    /**\n     * Check if data has changed.\n     *\n     * @return {boolean} True if changed or false if not.\n     */\n    protected hasDataChanged(): boolean {\n        if (!this.loaded) {\n            return false;\n        }\n\n        const inputData = this.getInputData();\n        if (!this.originalData || typeof this.originalData.title == 'undefined') {\n            // There is no original data, assume it hasn't changed.\n            return false;\n        }\n\n        if (this.originalData.title != inputData.title || this.originalData.content != inputData.content) {\n            return true;\n        }\n\n        return this.fileUploaderProvider.areFileListDifferent(inputData.attachmentfiles, this.originalData.attachmentfiles);\n    }\n\n    /**\n     * Pull to refresh.\n     *\n     * @param {any} refresher Refresher.\n     */\n    refreshSubmission(refresher: any): void {\n        if (this.loaded) {\n            const promises = [];\n\n            promises.push(this.workshopProvider.invalidateSubmissionData(this.workshopId, this.submission.id));\n            promises.push(this.workshopProvider.invalidateSubmissionsData(this.workshopId));\n\n            Promise.all(promises).finally(() => {\n                return this.fetchSubmissionData();\n            }).finally(() => {\n                refresher.complete();\n            });\n        }\n    }\n\n    /**\n     * Save the submission.\n     */\n    save(): void {\n        // Check if data has changed.\n        if (this.hasDataChanged()) {\n            this.saveSubmission().then(() => {\n                // Go back to entry list.\n                this.forceLeavePage();\n            }).catch(() => {\n                // Nothing to do.\n            });\n        } else {\n            // Nothing to save, just go back.\n            this.forceLeavePage();\n        }\n    }\n\n    /**\n     * Send submission and save.\n     *\n     * @return {Promise<any>} Resolved when done.\n     */\n    protected saveSubmission(): Promise<any> {\n        const inputData = this.getInputData();\n\n        if (!inputData.title) {\n            this.domUtils.showAlertTranslated('core.notice', 'addon.mod_workshop.submissionrequiredtitle');\n\n            return Promise.reject(null);\n        }\n        if (!inputData.content) {\n            this.domUtils.showAlertTranslated('core.notice', 'addon.mod_workshop.submissionrequiredcontent');\n\n            return Promise.reject(null);\n        }\n\n        let allowOffline = true,\n            saveOffline = false;\n\n        const modal = this.domUtils.showModalLoading('core.sending', true),\n            submissionId = this.submission.id;\n\n        // Add some HTML to the message if needed.\n        inputData.content = this.textUtils.formatHtmlLines(inputData.content);\n\n        // Upload attachments first if any.\n        allowOffline = !inputData.attachmentfiles.length;\n\n        return this.workshopHelper.uploadOrStoreSubmissionFiles(this.workshopId, this.submission.id, inputData.attachmentfiles,\n                this.editing, saveOffline).catch(() => {\n            // Cannot upload them in online, save them in offline.\n            saveOffline = true;\n            allowOffline = true;\n\n            return this.workshopHelper.uploadOrStoreSubmissionFiles(this.workshopId, this.submission.id,\n                inputData.attachmentfiles, this.editing, saveOffline);\n        }).then((attachmentsId) => {\n            if (this.editing) {\n                if (saveOffline) {\n                    // Save submission in offline.\n                    return this.workshopOffline.saveSubmission(this.workshopId, this.courseId, inputData.title,\n                            inputData.content, attachmentsId, submissionId, 'update').then(() => {\n                        // Don't return anything.\n                    });\n                }\n\n                // Try to send it to server.\n                // Don't allow offline if there are attachments since they were uploaded fine.\n                return this.workshopProvider.updateSubmission(this.workshopId, submissionId, this.courseId, inputData.title,\n                    inputData.content, attachmentsId, undefined, allowOffline);\n            }\n\n            if (saveOffline) {\n                // Save submission in offline.\n                return this.workshopOffline.saveSubmission(this.workshopId, this.courseId, inputData.title, inputData.content,\n                    attachmentsId, submissionId, 'add').then(() => {\n                    // Don't return anything.\n                });\n            }\n\n            // Try to send it to server.\n            // Don't allow offline if there are attachments since they were uploaded fine.\n            return this.workshopProvider.addSubmission(this.workshopId, this.courseId, inputData.title, inputData.content,\n                attachmentsId, undefined, submissionId, allowOffline);\n        }).then((newSubmissionId) => {\n            const data = {\n                workshopId: this.workshopId,\n                cmId: this.module.cmid\n            };\n\n            if (newSubmissionId && submissionId) {\n                // Data sent to server, delete stored files (if any).\n                this.workshopOffline.deleteSubmissionAction(this.workshopId, submissionId, this.editing ? 'update' : 'add');\n                this.workshopHelper.deleteSubmissionStoredFiles(this.workshopId, submissionId, this.editing);\n                data['submissionId'] = newSubmissionId;\n            }\n\n            const promise = newSubmissionId ? this.workshopProvider.invalidateSubmissionData(this.workshopId, newSubmissionId) :\n                Promise.resolve();\n\n            return promise.finally(() => {\n                this.eventsProvider.trigger(AddonModWorkshopProvider.SUBMISSION_CHANGED, data, this.siteId);\n\n                // Delete the local files from the tmp folder.\n                this.fileUploaderProvider.clearTmpFiles(inputData.attachmentfiles);\n            });\n        }).catch((message) => {\n            this.domUtils.showErrorModalDefault(message, 'Cannot save submission');\n        }).finally(() => {\n            modal.dismiss();\n        });\n    }\n\n    /**\n     * Component being destroyed.\n     */\n    ngOnDestroy(): void {\n        this.isDestroyed = true;\n        this.syncProvider.unblockOperation(this.component, this.workshopId);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/workshop/pages/edit-submission/edit-submission.ts"],"sourceRoot":""}