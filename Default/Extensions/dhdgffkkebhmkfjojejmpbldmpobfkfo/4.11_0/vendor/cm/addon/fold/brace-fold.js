'use strict';(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerHelper("fold","brace",function(b,c){function h(x){for(var m=c.ch,u=0;;)if(m=0>=m?-1:e.lastIndexOf(x,m-1),-1==m){if(1==u)break;u=1;m=e.length}else{if(1==u&&m<c.ch)break;k=b.getTokenTypeAt(a.Pos(f,m+1));if(!/^(comment|string)/.test(k))return m+1;--m}}var f=c.line,e=b.getLine(f),k,
d="{",n="}",l=h("{");null==l&&(d="[",n="]",l=h("["));if(null!=l){var q=1,y=b.lastLine(),p=f;a:for(;p<=y;++p)for(var r=b.getLine(p),g=p==f?l:0;;){var t=r.indexOf(d,g);g=r.indexOf(n,g);0>t&&(t=r.length);0>g&&(g=r.length);g=Math.min(t,g);if(g==r.length)break;if(b.getTokenTypeAt(a.Pos(p,g+1))==k)if(g==t)++q;else if(!--q){var v=p;var w=g;break a}++g}if(null!=v&&(f!=v||w!=l))return{from:a.Pos(f,l),to:a.Pos(v,w)}}});a.registerHelper("fold","import",function(b,c){function h(d){if(d<b.firstLine()||d>b.lastLine())return null;
var n=b.getTokenAt(a.Pos(d,1));/\S/.test(n.string)||(n=b.getTokenAt(a.Pos(d,n.end+1)));if("keyword"!=n.type||"import"!=n.string)return null;var l=d;for(d=Math.min(b.lastLine(),d+10);l<=d;++l){var q=b.getLine(l).indexOf(";");if(-1!=q)return{startCh:n.end,end:a.Pos(l,q)}}}c=c.line;var f=h(c),e;if(!f||h(c-1)||(e=h(c-2))&&e.end.line==c-1)return null;for(e=f.end;;){var k=h(e.line+1);if(null==k)break;e=k.end}return{from:b.clipPos(a.Pos(c,f.startCh+1)),to:e}});a.registerHelper("fold","include",function(b,
c){function h(k){if(k<b.firstLine()||k>b.lastLine())return null;var d=b.getTokenAt(a.Pos(k,1));/\S/.test(d.string)||(d=b.getTokenAt(a.Pos(k,d.end+1)));if("meta"==d.type&&"#include"==d.string.slice(0,8))return d.start+8}c=c.line;var f=h(c);if(null==f||null!=h(c-1))return null;for(var e=c;null!=h(e+1);)++e;return{from:a.Pos(c,f+1),to:b.clipPos(a.Pos(e))}})});
