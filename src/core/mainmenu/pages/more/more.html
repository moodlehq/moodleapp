<ion-header>
    <ion-navbar>
        <ion-title><core-format-text [text]="siteInfo.sitename"></core-format-text></ion-title>
    </ion-navbar>
</ion-header>
<ion-content>
    <ion-list>
        <a ion-item core-user-link>
            <ion-avatar item-start>
                <img [src]="siteInfo.userpictureurl" core-external-content alt="{{ 'core.pictureof' | translate:{$a: siteInfo.fullname} }}" role="presentation">
            </ion-avatar>
            <p>{{siteInfo.fullname}}</p>
        </a>
        <ion-item-divider color="light"></ion-item-divider>
        <ion-item text-center *ngIf="(!handlers || !handlers.length) && !handlersLoaded">
            <ion-spinner></ion-spinner>
        </ion-item>
        <ion-item *ngFor="let handler of handlers" class="core-moremenu-handler {{handler.class}}" (click)="openHandler(handler)" title="{{ handler.title |Â translate }}">
            <ion-icon [name]="handler.icon" item-start></ion-icon>
            <p>{{ handler.title | translate}}</p>
            <!-- @todo: Badge. -->
            <!-- <span ng-show="!loading && badge" class="badge badge-positive">{{badge}}</span>
            <ion-spinner ng-if="loading" class="icon"></ion-spinner> -->
        </ion-item>
        <div *ngFor="let item of customItems" class="core-moremenu-customitem">
            <a ion-item *ngIf="item.type != 'embedded'" [href]="item.url" core-link [capture]="item.type == 'app'" [inApp]="item.type == 'inappbrowser'" title="{{item.label}}">
                <ion-icon [name]="item.icon" item-start></ion-icon>
                <p>{{item.label}}</p>
            </a>
            <a ion-item *ngIf="item.type == 'embedded'" (click)="openItem(item)" title="{{item.label}}">
                <ion-icon [name]="item.icon" item-start></ion-icon>
                <p>{{item.label}}</p>
            </a>
        </div>
        <a *ngIf="showWeb" ion-item [href]="siteInfo.siteurl" core-link autoLogin="yes" title="{{ 'core.mainmenu.website' | translate }}">
            <ion-icon name="globe" item-start></ion-icon>
            <p>{{ 'core.mainmenu.website' | translate }}</p>
        </a>
        <a *ngIf="showHelp" ion-item [href]="docsUrl" core-link autoLogin="no" title="{{ 'core.mainmenu.help' | translate }}">
            <ion-icon name="help-buoy" item-start></ion-icon>
            <p>{{ 'core.mainmenu.help' | translate }}</p>
        </a>
        <a ion-item (click)="openSettings()" title="{{ 'core.mainmenu.appsettings' | translate }}">
            <ion-icon name="cog" item-start></ion-icon>
            <p>{{ 'core.mainmenu.appsettings' | translate }}</p>
        </a>
        <a ion-item (click)="logout()" title="{{ logoutLabel | translate }}">
            <ion-icon name="log-out" item-start></ion-icon>
            <p>{{ logoutLabel | translate }}</p>
        </a>
    </ion-list>
</ion-content>
