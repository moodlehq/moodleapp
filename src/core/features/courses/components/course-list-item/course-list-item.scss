@use "theme/globals" as *;

// ============================================
// ASPIRE COURSE CARD - MODERN MINIMAL
// ============================================

// Color palette for course cards
$course-colors: (
    0: (bg: linear-gradient(135deg, #4A9B7F 0%, #3D8B9E 100%), text: #FFFFFF),
    1: (bg: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%), text: #FFFFFF),
    2: (bg: linear-gradient(135deg, #F472B6 0%, #EC4899 100%), text: #FFFFFF),
    3: (bg: linear-gradient(135deg, #FBBF24 0%, #F59E0B 100%), text: #FFFFFF),
    4: (bg: linear-gradient(135deg, #34D399 0%, #10B981 100%), text: #FFFFFF),
    5: (bg: linear-gradient(135deg, #60A5FA 0%, #3B82F6 100%), text: #FFFFFF),
    6: (bg: linear-gradient(135deg, #A78BFA 0%, #7C3AED 100%), text: #FFFFFF),
    7: (bg: linear-gradient(135deg, #FB923C 0%, #EA580C 100%), text: #FFFFFF),
    8: (bg: linear-gradient(135deg, #2DD4BF 0%, #14B8A6 100%), text: #FFFFFF),
    9: (bg: linear-gradient(135deg, #F87171 0%, #EF4444 100%), text: #FFFFFF),
);

:host {
    display: block;
    width: 100%;
    height: 100%;

    // Generate color classes
    @for $i from 0 through 9 {
        &.course-color-#{$i} {
            .aspire-course-card {
                background: map-get(map-get($course-colors, $i), bg);
            }
        }
    }
}

.aspire-course-card {
    --background: transparent;
    --color: #FFFFFF;
    margin: 0;
    height: 100%;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease;

    &::part(native) {
        background: transparent;
        padding: 0;
        height: 100%;
    }

    &:active {
        transform: scale(0.98);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    &.item-dimmed {
        opacity: 0.6;
    }

    .card-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 16px 12px;
        height: 100%;
        text-align: center;
        min-height: 130px;
    }

    // Course Icon
    .course-icon-wrapper {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 10px;

        ion-icon {
            font-size: 20px;
            color: #FFFFFF;
        }
    }

    // Course Name - responsive sizing for long names
    .course-name {
        font-size: clamp(11px, 3vw, 14px); // Shrinks for smaller cards
        font-weight: 700;
        color: #FFFFFF;
        margin: 0 0 8px;
        line-height: 1.25;
        max-width: 100%;
        max-height: 3.75em; // ~3 lines at 1.25 line-height
        display: -webkit-box;
        -webkit-line-clamp: 3; // Allow 3 lines instead of 2
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        word-break: break-word;

        .favorite-icon {
            font-size: 12px;
            color: #FCD34D;
            margin-right: 4px;
            vertical-align: middle;
        }
    }

    // Divider
    .course-divider {
        width: 40px;
        height: 2px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 1px;
        margin-bottom: 8px;
    }

    // Category
    .course-category {
        font-size: 11px;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.85);
        margin: 0 0 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    // Progress
    .course-progress {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
        max-width: 120px;
        margin-top: auto;

        .progress-bar-container {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 2px;
            overflow: hidden;

            .progress-bar-fill {
                height: 100%;
                background: #FFFFFF;
                border-radius: 2px;
                transition: width 0.3s ease;
            }
        }

        .progress-text {
            font-size: 10px;
            font-weight: 600;
            color: #FFFFFF;
            min-width: 28px;
        }
    }
}

// ============================================
// LEGACY SUPPORT (keep for compatibility)
// ============================================

:host {
    @for $i from 0 to length($core-course-image-background) {
        &.course-color-#{$i} {
            --course-color: var(--core-course-color-#{$i});
            --course-color-tint: var(--core-course-color-#{$i}-tint);
        }
    }
}

// Legacy list layout (hidden but kept for compatibility)
ion-card.core-course-list-item,
ion-card.core-course-list-card {
    display: none;
}
