---
phase: 02-custom-code-adaptation
plan: 07
type: code
wave: 2
depends_on: [02-01]
files_modified:
  - src/addons/calendar/pages/list/list.ts
  - src/addons/messages/pages/discussion/discussion.ts
  - src/addons/mod/resource/components/index/index.ts
  - src/core/features/user/pages/about/about.ts
autonomous: true

must_haves:
  truths:
    - "Calendar list page compiles without TypeScript errors"
    - "Messages discussion page compiles without TypeScript errors"
    - "Resource component compiles without TypeScript errors"
    - "User about page compiles without TypeScript errors"
    - "Parent mentee context preserved where applicable"
  artifacts:
    - path: "src/addons/messages/pages/discussion/discussion.ts"
      provides: "Messages discussion page"
    - path: "src/addons/mod/resource/components/index/index.ts"
      provides: "Resource module component"
---

<objective>
Fix other addon import issues - calendar, messages, resource, and user about pages.

Purpose: These addons have simple import path fixes needed (mostly CoreLoadings path updates).

Output: All addon pages compile without errors.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-custom-code-adaptation/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix messages/discussion.ts imports</name>
  <files>src/addons/messages/pages/discussion/discussion.ts</files>
  <action>
    Fix the following import issue identified in research:

    1. **Fix CoreLoadings import path** (line ~46):
       Current:
       ```typescript
       import { CoreLoadings } from '@services/loadings';
       ```
       Change to:
       ```typescript
       import { CoreLoadings } from '@services/overlays/loadings';
       ```

    2. **Add CoreSharedModule import** if missing (used in imports array):
       ```typescript
       import { CoreSharedModule } from '@/core/shared.module';
       ```

    3. **Verify CoreModals import** (used for openSideModal):
       Should be from `@services/overlays/modals` if used.

    4. **Add CoreSplitViewComponent import** (injected in constructor):
       ```typescript
       import { CoreSplitViewComponent } from '@components/split-view/split-view';
       ```

    Preserve any Aspire customizations (CoreUserParent import already present).
  </action>
  <verify>
    Run: `npx tsc --noEmit src/addons/messages/pages/discussion/discussion.ts 2>&1 | head -30`
  </verify>
  <done>
    - CoreLoadings imported from @services/overlays/loadings
    - CoreSharedModule imported
    - No TypeScript errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix user/about.ts imports</name>
  <files>src/core/features/user/pages/about/about.ts</files>
  <action>
    Fix the following import issue identified in research:

    1. **Fix CoreLoadings import path** (line ~31):
       Current:
       ```typescript
       import { CoreLoadings } from '@services/loadings';
       ```
       Change to:
       ```typescript
       import { CoreLoadings } from '@services/overlays/loadings';
       ```

    2. **Check for other overlay service imports** and update if needed:
       - `@services/toasts` -> `@services/overlays/toasts`
       - `@services/alerts` -> `@services/overlays/alerts`
       - `@services/modals` -> `@services/overlays/modals`
  </action>
  <verify>
    Run: `npx tsc --noEmit src/core/features/user/pages/about/about.ts 2>&1 | head -20`
  </verify>
  <done>
    - CoreLoadings imported from @services/overlays/loadings
    - No TypeScript errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Fix calendar and resource addon imports</name>
  <files>
    src/addons/calendar/pages/list/list.ts
    src/addons/mod/resource/components/index/index.ts
  </files>
  <action>
    1. **Check calendar/list.ts**:
       - Verify overlay service import paths
       - Update any old paths to new @services/overlays/* pattern
       - Check for Aspire customizations to preserve

    2. **Check resource/index.ts**:
       - Verify overlay service import paths
       - Update any old paths to new @services/overlays/* pattern
       - Check for Aspire customizations to preserve

    Apply the standard import path migration:
    - `@services/loadings` -> `@services/overlays/loadings`
    - `@services/toasts` -> `@services/overlays/toasts`
    - `@services/alerts` -> `@services/overlays/alerts`
    - `@services/modals` -> `@services/overlays/modals`
    - `@services/popovers` -> `@services/overlays/popovers`
  </action>
  <verify>
    Run: `npx tsc --noEmit src/addons/calendar/pages/list/list.ts src/addons/mod/resource/components/index/index.ts 2>&1 | head -30`
  </verify>
  <done>
    - Calendar list page has updated imports
    - Resource component has updated imports
    - No TypeScript errors
  </done>
</task>

</tasks>

<verification>
Run TypeScript check on all addons:
```bash
npx tsc --noEmit \
  src/addons/messages/pages/discussion/discussion.ts \
  src/core/features/user/pages/about/about.ts \
  src/addons/calendar/pages/list/list.ts \
  src/addons/mod/resource/components/index/index.ts \
  2>&1 | head -40
```

Check for old import paths across all addons:
```bash
grep -rn "@services/loadings\|@services/toasts\|@services/alerts\|@services/modals" \
  src/addons/calendar/ \
  src/addons/messages/ \
  src/addons/mod/resource/ \
  src/core/features/user/pages/about/ \
  2>/dev/null | grep -v overlays
```
Should return nothing (all paths should include /overlays/).
</verification>

<success_criteria>
- ADD-01: Calendar page customizations preserved (if any)
- ADD-02: Messages page customizations preserved (parent context)
- ADD-03: Resource component customizations preserved (if any)
- ADD-04: All addon imports updated to new overlay service paths
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-custom-code-adaptation/02-07-SUMMARY.md`
</output>
